<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta http-equiv="Last-Modified" content="Thu, 01 Jan 1970 00:00:00 GMT">
    <meta name="cache-control" content="max-age=0">
    <title>WF EOL Tester - ROBOT CONTROL EMBEDDED FIX</title>
    
    <!-- CSS Stylesheets -->
    <link rel="stylesheet" href="static/css/main.css?v=20250110_235255_NOCACHE&t=20250110235500">
    <link rel="stylesheet" href="static/css/components.css?v=20250110_235255_NOCACHE&t=20250110235500">
    <link rel="stylesheet" href="static/css/charts.css?v=20250110_235255_NOCACHE&t=20250110235500">
    
    <!-- Third-party Libraries -->
    <script src="static/libs/chart.js/chart.min.js?v=20250110"></script>
    
    <link rel="icon" href="static/assets/icons/favicon.ico" type="image/x-icon">
    
    <style>
        /* Make disabled buttons visually distinct */
        .btn:disabled {
            opacity: 0.4 !important;
            cursor: not-allowed !important;
            pointer-events: none;
        }
        
        .btn:not(:disabled) {
            opacity: 1 !important;
            cursor: pointer !important;
        }
    </style>
</head>
<body>
    <!-- Main Application Container -->
    <div id="app" class="app-container">
        
        <!-- Top Header -->
        <header id="app-header" class="app-header">
            <div class="header-content">
                <div class="header-left">
                    <h1 class="app-title">
                        <span class="app-icon">WF</span>
                        WF EOL Tester
                    </h1>
                    <div class="system-status" id="system-status">
                        <span class="status-indicator" id="status-indicator">‚óè</span>
                        <span class="status-text" id="status-text">Initializing...</span>
                    </div>
                </div>
                <div class="header-right">
                    <div class="header-controls">
                        <button id="emergency-stop" class="btn btn-danger btn-emergency" title="Emergency Stop">
                            EMERGENCY STOP
                        </button>
                        <div class="connection-status" id="connection-status">
                            <span class="connection-indicator offline" id="connection-indicator"></span>
                            <span class="connection-text" id="connection-text">Offline</span>
                        </div>
                    </div>
                </div>
            </div>
        </header>
        
        <!-- Main Content Area -->
        <div class="app-body">
            
            <!-- Left Sidebar -->
            <aside id="app-sidebar" class="app-sidebar">
                <nav class="sidebar-nav">
                    
                    <!-- Use Case Menu -->
                    <div class="nav-section">
                        <h3 class="nav-section-title" data-toggle="usecase">Use Case</h3>
                        <ul class="nav-menu" id="usecase-menu" style="display: none;">
                            <li><a href="#" data-page="eol-force-test" class="nav-link">EOL Force Test</a></li>
                            <li><a href="#" data-page="robot-home" class="nav-link">Robot Home</a></li>
                        </ul>
                    </div>
                    
                    <!-- Hardware Control Menu -->
                    <div class="nav-section">
                        <h3 class="nav-section-title" data-toggle="hardware">Hardware Control</h3>
                        <ul class="nav-menu" id="hardware-menu" style="display: none;">
                            <li><a href="#" data-page="robot-control" class="nav-link">Robot Control</a></li>
                            <li><a href="#" data-page="power-control" class="nav-link">Power Control</a></li>
                            <li><a href="#" data-page="mcu-control" class="nav-link">MCU Control</a></li>
                            <li><a href="#" data-page="loadcell-control" class="nav-link">LoadCell Control</a></li>
                            <li><a href="#" data-page="digital-io-control" class="nav-link">Digital I/O Control</a></li>
                        </ul>
                    </div>
                    
                    <!-- Parameters Menu -->
                    <div class="nav-section">
                        <h3 class="nav-section-title" data-toggle="parameters">Parameters</h3>
                        <ul class="nav-menu" id="parameters-menu" style="display: none;">
                            <li><a href="#" data-page="test-profiles" class="nav-link">Test Profiles</a></li>
                            <li><a href="#" data-page="dut-defaults" class="nav-link">DUT Defaults</a></li>
                            <li><a href="#" data-page="hardware-config" class="nav-link">Hardware Config</a></li>
                            <li><a href="#" data-page="hardware-model" class="nav-link">Hardware Model</a></li>
                        </ul>
                    </div>
                    
                    <!-- API & Tools Menu -->
                    <div class="nav-section">
                        <h3 class="nav-section-title" data-toggle="api-tools">üîß API & Tools</h3>
                        <ul class="nav-menu" id="api-tools-menu" style="display: none;">
                            <li><a href="/api/docs" target="_blank" class="nav-link">üìñ API Documentation <span style="font-size: 10px;">‚ÜóÔ∏è</span></a></li>
                            <li><a href="/api/redoc" target="_blank" class="nav-link">üìã API Reference <span style="font-size: 10px;">‚ÜóÔ∏è</span></a></li>
                            <li><a href="#" data-page="api-status" class="nav-link">‚ö° API Status</a></li>
                        </ul>
                    </div>
                    
                </nav>
            </aside>
            
            <!-- Main Content Area -->
            <main id="app-content" class="app-content">
                
                <!-- Welcome Screen (Default) -->
                <div id="welcome-page" class="content-page active">
                    <div class="welcome-container">
                        <div class="welcome-header">
                            <h2>üöÄ Robot Control EMBEDDED - Cache Problem SOLVED!</h2>
                            <p class="welcome-subtitle">Direct Embedded Robot Control - No Dynamic Loading</p>
                        </div>
                        
                        <div class="quick-status-grid">
                            <div class="status-card" id="hardware-status-card">
                                <h3>Hardware Status</h3>
                                <div class="status-indicators">
                                    <div class="status-item">
                                        <span class="status-label">Robot:</span>
                                        <span class="status-value" id="robot-status">Disconnected</span>
                                    </div>
                                    <div class="status-item">
                                        <span class="status-label">Power:</span>
                                        <span class="status-value" id="power-status">Disconnected</span>
                                    </div>
                                    <div class="status-item">
                                        <span class="status-label">MCU:</span>
                                        <span class="status-value" id="mcu-status">Disconnected</span>
                                    </div>
                                    <div class="status-item">
                                        <span class="status-label">LoadCell:</span>
                                        <span class="status-value" id="loadcell-status">Disconnected</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="status-card" id="system-info-card">
                                <h3>System Information</h3>
                                <div class="status-indicators">
                                    <div class="status-item">
                                        <span class="status-label">Version:</span>
                                        <span class="status-value">1.0.0</span>
                                    </div>
                                    <div class="status-item">
                                        <span class="status-label">Architecture:</span>
                                        <span class="status-value">Clean Architecture</span>
                                    </div>
                                    <div class="status-item">
                                        <span class="status-label">Last Test:</span>
                                        <span class="status-value" id="last-test-time">Never</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="quick-actions">
                            <h3>Quick Actions</h3>
                            <div class="action-buttons">
                                <button class="btn btn-primary" data-action="start-eol-test">
                                    Start EOL Test
                                </button>
                                <button class="btn btn-secondary" data-action="robot-home">
                                    Home Robot
                                </button>
                                <button class="btn btn-info" data-action="check-hardware">
                                    Check Hardware
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Dynamic Content Pages -->
                <div id="dynamic-content" class="content-pages">
                    <!-- Robot Control Page - EMBEDDED FOR CACHE FIX -->
                    <div id="robot-control" class="content-page hardware-control-panel" style="display: none;">
                        <div class="page-header">
                            <div class="header-content">
                                <h1 class="page-title">ü§ñ Robot Control System</h1>
                                <div class="page-subtitle">AJINEXTEK Motion Controller - Direct Embedded</div>
                            </div>
                            
                            <div class="status-badge" id="robot-status-badge">
                                <div class="status-indicator">
                                    <div class="status-light status-unknown"></div>
                                    <span class="status-text">Disconnected</span>
                                </div>
                            </div>
                        </div>

                        <div class="panel-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; padding: 20px;">
                            <!-- Connection Panel -->
                            <div class="control-panel connection-panel" style="background: white; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); padding: 20px;">
                                <div class="panel-header" style="border-bottom: 1px solid #eee; padding-bottom: 10px; margin-bottom: 20px;">
                                    <h3>üîå Connection</h3>
                                    <div class="connection-status" id="robot-connection-status">
                                        <div class="status-dot status-unknown" style="width: 8px; height: 8px; border-radius: 50%; background: #999; display: inline-block; margin-right: 5px;"></div>
                                        <span>Disconnected</span>
                                    </div>
                                </div>
                                
                                <div class="panel-content">
                                    <div class="connection-controls" style="display: flex; gap: 10px; margin-bottom: 15px;">
                                        <button class="btn btn-success" id="robot-connect-btn" style="flex: 1; padding: 10px; background: #28a745; color: white; border: none; border-radius: 4px;">Connect</button>
                                        <button class="btn btn-secondary" id="robot-disconnect-btn" disabled style="flex: 1; padding: 10px; background: #6c757d; color: white; border: none; border-radius: 4px;">Disconnect</button>
                                    </div>
                                    
                                    <div class="connection-info">
                                        <div class="info-row" style="margin-bottom: 10px;">
                                            <label style="font-weight: bold;">Controller:</label>
                                            <span>AJINEXTEK Motion Controller</span>
                                        </div>
                                        <div class="info-row" style="margin-bottom: 10px;">
                                            <label for="robot-axis-select" style="font-weight: bold;">Axis ID:</label>
                                            <select id="robot-axis-select" class="form-control form-control-sm" style="padding: 5px; border: 1px solid #ddd; border-radius: 4px;">
                                                <option value="0">Axis 0</option>
                                                <option value="1">Axis 1</option>
                                                <option value="2">Axis 2</option>
                                                <option value="3">Axis 3</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Position Panel -->
                            <div class="control-panel status-panel" style="background: white; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); padding: 20px;">
                                <div class="panel-header" style="border-bottom: 1px solid #eee; padding-bottom: 10px; margin-bottom: 20px;">
                                    <h3>üìç Position & Status</h3>
                                    <button class="btn btn-sm btn-outline" id="robot-refresh-status-btn" style="padding: 5px 10px; border: 1px solid #007bff; color: #007bff; background: white; border-radius: 4px;">Refresh</button>
                                </div>
                                
                                <div class="panel-content">
                                    <div class="status-grid" style="display: grid; gap: 15px;">
                                        <div class="status-card" style="text-align: center; padding: 15px; background: #f8f9fa; border-radius: 6px;">
                                            <div class="status-label" style="font-size: 12px; color: #6c757d; margin-bottom: 5px;">Current Position</div>
                                            <div class="status-value" id="robot-current-position" style="font-size: 18px; font-weight: bold;">
                                                <span class="value">---.---</span>
                                                <span class="unit" style="font-size: 14px; color: #6c757d;">Œºm</span>
                                            </div>
                                        </div>
                                        
                                        <div class="status-card" style="text-align: center; padding: 15px; background: #f8f9fa; border-radius: 6px;">
                                            <div class="status-label" style="font-size: 12px; color: #6c757d; margin-bottom: 5px;">Servo Status</div>
                                            <div class="status-value" id="robot-servo-status" style="font-size: 14px;">
                                                <div class="status-dot status-unknown" style="width: 8px; height: 8px; border-radius: 50%; background: #999; display: inline-block; margin-right: 5px;"></div>
                                                <span>Unknown</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Servo Control Panel -->
                            <div class="control-panel servo-panel" style="background: white; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); padding: 20px;">
                                <div class="panel-header" style="border-bottom: 1px solid #eee; padding-bottom: 10px; margin-bottom: 20px;">
                                    <h3>‚ö° Servo Control</h3>
                                    <div class="warning-indicator" style="color: #ffc107; font-size: 12px;">‚ö†Ô∏è Motor Power Control</div>
                                </div>
                                
                                <div class="panel-content">
                                    <div class="servo-controls" style="display: grid; gap: 10px;">
                                        <button class="btn btn-success servo-btn" id="robot-servo-on-btn" disabled style="padding: 15px; background: #28a745; color: white; border: none; border-radius: 4px; text-align: left;">
                                            <div>üü¢ Enable Servo</div>
                                            <small class="btn-subtitle" style="display: block; font-size: 11px; opacity: 0.8;">Turn ON motor power</small>
                                        </button>
                                        
                                        <button class="btn btn-warning servo-btn" id="robot-servo-off-btn" disabled style="padding: 15px; background: #ffc107; color: #212529; border: none; border-radius: 4px; text-align: left;">
                                            <div>üî¥ Disable Servo</div>
                                            <small class="btn-subtitle" style="display: block; font-size: 11px; opacity: 0.8;">Turn OFF motor power</small>
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- Movement Control Panel -->
                            <div class="control-panel movement-panel" style="background: white; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); padding: 20px; grid-column: span 2;">
                                <div class="panel-header" style="border-bottom: 1px solid #eee; padding-bottom: 10px; margin-bottom: 20px;">
                                    <h3>üéØ Movement Control</h3>
                                    <div class="panel-tabs" style="display: flex; gap: 5px;">
                                        <button class="tab-btn active" data-tab="home" style="padding: 8px 16px; background: #007bff; color: white; border: none; border-radius: 4px;">Home</button>
                                        <button class="tab-btn" data-tab="absolute" style="padding: 8px 16px; background: #f8f9fa; color: #495057; border: 1px solid #dee2e6; border-radius: 4px;">Absolute</button>
                                        <button class="tab-btn" data-tab="relative" style="padding: 8px 16px; background: #f8f9fa; color: #495057; border: 1px solid #dee2e6; border-radius: 4px;">Relative</button>
                                    </div>
                                </div>
                                
                                <div class="panel-content">
                                    <!-- Home Tab -->
                                    <div class="tab-content active" id="home-tab" style="text-align: center; padding: 30px;">
                                        <button class="btn btn-primary btn-lg" id="robot-home-axis-btn" disabled style="padding: 20px 40px; background: #007bff; color: white; border: none; border-radius: 8px; font-size: 16px;">
                                            <div>üè† Home Axis</div>
                                            <small class="btn-subtitle" style="display: block; font-size: 12px; opacity: 0.8;">Move to origin position</small>
                                        </button>
                                    </div>
                                    
                                    <!-- Absolute Move Tab -->
                                    <div class="tab-content" id="absolute-tab" style="display: none;">
                                        <div class="form-group" style="margin-bottom: 20px;">
                                            <label for="absolute-position" style="display: block; font-weight: bold; margin-bottom: 5px;">Target Position (Œºm)</label>
                                            <input type="number" id="absolute-position" class="form-control" 
                                                   min="0" max="500000" step="0.001" placeholder="Enter position"
                                                   style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;">
                                        </div>
                                        
                                        <div class="motion-parameters" style="margin-bottom: 20px;">
                                            <div class="form-row" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px;">
                                                <div class="form-group">
                                                    <label for="absolute-velocity" style="display: block; font-weight: bold; margin-bottom: 5px;">Velocity (Œºm/s)</label>
                                                    <input type="number" id="absolute-velocity" class="form-control" 
                                                           value="200" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;">
                                                </div>
                                                <div class="form-group">
                                                    <label for="absolute-acceleration" style="display: block; font-weight: bold; margin-bottom: 5px;">Acceleration (Œºm/s¬≤)</label>
                                                    <input type="number" id="absolute-acceleration" class="form-control" 
                                                           value="1000" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;">
                                                </div>
                                                <div class="form-group">
                                                    <label for="absolute-deceleration" style="display: block; font-weight: bold; margin-bottom: 5px;">Deceleration (Œºm/s¬≤)</label>
                                                    <input type="number" id="absolute-deceleration" class="form-control" 
                                                           value="1000" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;">
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <button class="btn btn-primary btn-lg" id="robot-move-absolute-btn" disabled style="width: 100%; padding: 15px; background: #007bff; color: white; border: none; border-radius: 4px; font-size: 16px;">
                                            üéØ Move to Position
                                        </button>
                                    </div>
                                    
                                    <!-- Relative Move Tab -->
                                    <div class="tab-content" id="relative-tab" style="display: none;">
                                        <div class="form-group" style="margin-bottom: 20px;">
                                            <label for="relative-distance" style="display: block; font-weight: bold; margin-bottom: 5px;">Relative Distance (Œºm)</label>
                                            <input type="number" id="relative-distance" class="form-control" 
                                                   placeholder="Enter distance" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;">
                                        </div>
                                        
                                        <div class="motion-parameters" style="margin-bottom: 20px;">
                                            <div class="form-row" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px;">
                                                <div class="form-group">
                                                    <label for="relative-velocity" style="display: block; font-weight: bold; margin-bottom: 5px;">Velocity (Œºm/s)</label>
                                                    <input type="number" id="relative-velocity" class="form-control" 
                                                           value="200" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;">
                                                </div>
                                                <div class="form-group">
                                                    <label for="relative-acceleration" style="display: block; font-weight: bold; margin-bottom: 5px;">Acceleration (Œºm/s¬≤)</label>
                                                    <input type="number" id="relative-acceleration" class="form-control" 
                                                           value="1000" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;">
                                                </div>
                                                <div class="form-group">
                                                    <label for="relative-deceleration" style="display: block; font-weight: bold; margin-bottom: 5px;">Deceleration (Œºm/s¬≤)</label>
                                                    <input type="number" id="relative-deceleration" class="form-control" 
                                                           value="1000" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;">
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <button class="btn btn-primary btn-lg" id="robot-move-relative-btn" disabled style="width: 100%; padding: 15px; background: #007bff; color: white; border: none; border-radius: 4px; font-size: 16px;">
                                            üìè Move Distance
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- Emergency Control Panel -->
                            <div class="control-panel emergency-panel" style="background: white; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); padding: 20px;">
                                <div class="panel-header" style="border-bottom: 1px solid #eee; padding-bottom: 10px; margin-bottom: 20px;">
                                    <h3>üö® Emergency Control</h3>
                                    <div class="danger-indicator" style="color: #dc3545; font-size: 12px;">üõë Safety Critical</div>
                                </div>
                                
                                <div class="panel-content" style="display: grid; gap: 10px;">
                                    <button class="btn btn-danger btn-lg emergency-btn" id="index-emergency-stop-btn" style="padding: 20px; background: #dc3545; color: white; border: none; border-radius: 4px; text-align: left; font-size: 16px;">
                                        <div>üõë EMERGENCY STOP</div>
                                        <small class="btn-subtitle" style="display: block; font-size: 12px; opacity: 0.8;">Immediate stop all motion</small>
                                    </button>
                                    
                                    <button class="btn btn-warning" id="robot-stop-motion-btn" disabled style="padding: 15px; background: #ffc107; color: #212529; border: none; border-radius: 4px; text-align: left;">
                                        <div>‚è∏Ô∏è Stop Motion</div>
                                        <small class="btn-subtitle" style="display: block; font-size: 11px; opacity: 0.8;">Controlled stop with deceleration</small>
                                    </button>
                                </div>
                            </div>

                            <!-- Operations Log Panel -->
                            <div class="control-panel log-panel" style="background: white; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); padding: 20px;">
                                <div class="panel-header" style="border-bottom: 1px solid #eee; padding-bottom: 10px; margin-bottom: 20px; display: flex; justify-content: space-between; align-items: center;">
                                    <h3>üìã Operations Log</h3>
                                    <div class="log-controls" style="display: flex; gap: 5px;">
                                        <button class="btn btn-sm btn-outline" id="robot-clear-log-btn" style="padding: 5px 10px; border: 1px solid #6c757d; color: #6c757d; background: white; border-radius: 4px; font-size: 12px;">Clear</button>
                                        <button class="btn btn-sm btn-outline" id="robot-export-log-btn" style="padding: 5px 10px; border: 1px solid #6c757d; color: #6c757d; background: white; border-radius: 4px; font-size: 12px;">Export</button>
                                    </div>
                                </div>
                                
                                <div class="panel-content">
                                    <div class="log-viewer" id="robot-log-viewer" style="background: #f8f9fa; padding: 15px; border-radius: 4px; font-family: monospace; font-size: 12px; max-height: 200px; overflow-y: auto;">
                                        <div class="log-entry" style="margin-bottom: 5px;">
                                            <span class="timestamp" style="color: #6c757d;">[--:--:--]</span>
                                            <span class="level info" style="color: #007bff; font-weight: bold;">INFO</span>
                                            <span class="message">Robot Control Panel initialized - EMBEDDED VERSION</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Robot Control JavaScript moved to robot-control-embedded.js -->
                    </div>
                    
                    <!-- Power Control Page - EMBEDDED FOR CACHE FIX -->
                    <div id="power-control" class="content-page hardware-control-panel" style="display: none; background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); min-height: 100vh; padding: 20px;">
                        <div class="page-header" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 8px; margin-bottom: 20px; box-shadow: 0 4px 12px rgba(0,0,0,0.15);">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <div>
                                    <h1 style="margin: 0; font-size: 1.5em; font-weight: 600;">
                                        <i class="icon-power" style="margin-right: 8px;"></i>
                                        Power Control System
                                    </h1>
                                    <div style="font-size: 0.9em; opacity: 0.9; margin-top: 4px;">
                                        ODA Power Supply Controller
                                    </div>
                                </div>
                                <div class="status-badge" id="power-status-badge" style="background: rgba(255,255,255,0.2); padding: 8px 16px; border-radius: 20px; backdrop-filter: blur(10px);">
                                    <div class="status-indicator" style="display: flex; align-items: center; gap: 8px;">
                                        <div class="status-light status-unknown"></div>
                                        <span class="status-text" style="font-weight: 500; font-size: 0.9em;">Disconnected</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="panel-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 20px; max-width: 1400px; margin: 0 auto;">
                            <!-- Connection Panel -->
                            <div class="control-panel connection-panel" style="background: white; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); padding: 20px;">
                                <div class="panel-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px solid #e9ecef;">
                                    <h3 style="margin: 0; font-size: 1.1em; font-weight: 600; color: #495057;"><i class="icon-connection" style="margin-right: 8px;"></i>Connection</h3>
                                    <div class="connection-status" id="power-connection-status" style="display: flex; align-items: center; gap: 6px;">
                                        <div class="status-dot status-unknown"></div>
                                        <span style="font-size: 0.9em; font-weight: 500;">Disconnected</span>
                                    </div>
                                </div>
                                
                                <div class="panel-content">
                                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 15px; font-size: 0.9em;">
                                        <div><strong>Host:</strong> <span id="power-host">192.168.11.1</span></div>
                                        <div><strong>Port:</strong> <span id="power-port">5000</span></div>
                                        <div><strong>Channel:</strong> <span id="power-channel">1</span></div>
                                        <div><strong>Identity:</strong> <span id="power-device-identity">--</span></div>
                                    </div>
                                    <div style="display: flex; gap: 8px;">
                                        <button class="btn btn-success" id="power-connect-btn" style="flex: 1;">
                                            <i class="icon-connect"></i> Connect
                                        </button>
                                        <button class="btn btn-secondary" id="power-disconnect-btn" disabled style="flex: 1;">
                                            <i class="icon-disconnect"></i> Disconnect
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- Live Readings Panel -->
                            <div class="control-panel readings-panel" style="background: white; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); padding: 20px;">
                                <div class="panel-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px solid #e9ecef;">
                                    <h3 style="margin: 0; font-size: 1.1em; font-weight: 600; color: #495057;"><i class="icon-meter" style="margin-right: 8px;"></i>Live Readings</h3>
                                    <button class="btn btn-sm btn-outline" id="power-refresh-readings-btn" style="font-size: 0.8em; padding: 4px 8px;">
                                        <i class="icon-refresh"></i> Refresh
                                    </button>
                                </div>
                                
                                <div class="panel-content">
                                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px;">
                                        <div style="text-align: center; padding: 12px; background: #f8f9fa; border-radius: 6px;">
                                            <div style="font-size: 0.8em; color: #6c757d; margin-bottom: 4px;">Voltage</div>
                                            <div id="power-voltage-reading" style="font-size: 1.2em; font-weight: bold; color: #007bff;">
                                                <span class="value">---.--</span> <span class="unit">V</span>
                                            </div>
                                        </div>
                                        <div style="text-align: center; padding: 12px; background: #f8f9fa; border-radius: 6px;">
                                            <div style="font-size: 0.8em; color: #6c757d; margin-bottom: 4px;">Current</div>
                                            <div id="power-current-reading" style="font-size: 1.2em; font-weight: bold; color: #28a745;">
                                                <span class="value">---.--</span> <span class="unit">A</span>
                                            </div>
                                        </div>
                                        <div style="text-align: center; padding: 12px; background: #f8f9fa; border-radius: 6px;">
                                            <div style="font-size: 0.8em; color: #6c757d; margin-bottom: 4px;">Power</div>
                                            <div id="power-power-reading" style="font-size: 1.2em; font-weight: bold; color: #fd7e14;">
                                                <span class="value">---.--</span> <span class="unit">W</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Output Control Panel -->
                            <div class="control-panel output-panel" style="background: white; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); padding: 20px;">
                                <div class="panel-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px solid #e9ecef;">
                                    <h3 style="margin: 0; font-size: 1.1em; font-weight: 600; color: #495057;"><i class="icon-output" style="margin-right: 8px;"></i>Output Control</h3>
                                    <div class="output-status" id="power-output-status" style="display: flex; align-items: center; gap: 6px;">
                                        <div class="status-dot status-unknown"></div>
                                        <span style="font-size: 0.9em; font-weight: 500;">Unknown</span>
                                    </div>
                                </div>
                                
                                <div class="panel-content">
                                    <div style="display: flex; gap: 8px; margin-bottom: 15px;">
                                        <button class="btn btn-danger" id="power-enable-output-btn" disabled style="flex: 1; padding: 12px;">
                                            <i class="icon-power-on"></i> Enable Output
                                        </button>
                                        <button class="btn btn-secondary" id="power-disable-output-btn" disabled style="flex: 1; padding: 12px;">
                                            <i class="icon-power-off"></i> Disable
                                        </button>
                                    </div>
                                    <div style="padding: 8px; background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 4px; font-size: 0.8em; color: #856404;">
                                        <i class="icon-warning"></i> <strong>HIGH VOLTAGE:</strong> Ensure safety precautions before enabling output.
                                    </div>
                                </div>
                            </div>

                            <!-- Voltage Control Panel -->
                            <div class="control-panel voltage-control-panel" style="background: white; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); padding: 20px;">
                                <div class="panel-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px solid #e9ecef;">
                                    <h3 style="margin: 0; font-size: 1.1em; font-weight: 600; color: #495057;"><i class="icon-voltage" style="margin-right: 8px;"></i>Voltage Control</h3>
                                    <div class="current-setting" id="power-voltage-setting" style="font-size: 0.9em; font-weight: 500; color: #007bff;">
                                        <span>---.-- V</span>
                                    </div>
                                </div>
                                
                                <div class="panel-content">
                                    <div style="margin-bottom: 12px;">
                                        <label style="font-size: 0.9em; font-weight: 500; margin-bottom: 6px; display: block;">Voltage Setpoint (0-50V)</label>
                                        <div style="display: flex; gap: 8px;">
                                            <input type="number" id="voltage-setpoint" style="flex: 1; padding: 8px; border: 1px solid #ced4da; border-radius: 4px;" 
                                                   min="0" max="50" step="0.01" placeholder="0.00">
                                            <span style="padding: 8px; background: #e9ecef; border: 1px solid #ced4da; border-radius: 4px; font-size: 0.9em;">V</span>
                                        </div>
                                    </div>
                                    <div style="display: flex; gap: 4px; margin-bottom: 15px;">
                                        <button class="btn btn-sm btn-outline preset-btn" data-voltage="0" style="flex: 1; padding: 4px; font-size: 0.8em;">0V</button>
                                        <button class="btn btn-sm btn-outline preset-btn" data-voltage="3.3" style="flex: 1; padding: 4px; font-size: 0.8em;">3.3V</button>
                                        <button class="btn btn-sm btn-outline preset-btn" data-voltage="5" style="flex: 1; padding: 4px; font-size: 0.8em;">5V</button>
                                        <button class="btn btn-sm btn-outline preset-btn" data-voltage="12" style="flex: 1; padding: 4px; font-size: 0.8em;">12V</button>
                                        <button class="btn btn-sm btn-outline preset-btn" data-voltage="24" style="flex: 1; padding: 4px; font-size: 0.8em;">24V</button>
                                    </div>
                                    <button class="btn btn-primary" id="power-set-voltage-btn" disabled style="width: 100%; padding: 10px;">
                                        <i class="icon-set"></i> Set Voltage
                                    </button>
                                </div>
                            </div>

                            <!-- Current Control Panel -->
                            <div class="control-panel current-control-panel" style="background: white; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); padding: 20px;">
                                <div class="panel-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px solid #e9ecef;">
                                    <h3 style="margin: 0; font-size: 1.1em; font-weight: 600; color: #495057;"><i class="icon-current" style="margin-right: 8px;"></i>Current Control</h3>
                                    <div class="panel-tabs" style="display: flex; gap: 4px;">
                                        <button class="tab-btn active" data-tab="current" style="padding: 4px 8px; font-size: 0.8em; border-radius: 4px;">Current</button>
                                        <button class="tab-btn" data-tab="limit" style="padding: 4px 8px; font-size: 0.8em; border-radius: 4px;">Limit</button>
                                    </div>
                                </div>
                                
                                <div class="panel-content">
                                    <div class="tab-content active" id="current-tab">
                                        <div style="margin-bottom: 12px; font-size: 0.9em; color: #007bff;">Setting: <span id="power-current-setting-value">---.-- A</span></div>
                                        <div style="display: flex; gap: 8px; margin-bottom: 12px;">
                                            <input type="number" id="current-setpoint" style="flex: 1; padding: 8px; border: 1px solid #ced4da; border-radius: 4px;" 
                                                   min="0" max="50" step="0.01" placeholder="Current (A)">
                                            <button class="btn btn-primary" id="power-set-current-btn" disabled style="padding: 8px 16px;">Set</button>
                                        </div>
                                    </div>
                                    <div class="tab-content" id="limit-tab" style="display: none;">
                                        <div style="margin-bottom: 12px; font-size: 0.9em; color: #dc3545;">Limit: <span id="power-current-limit-setting-value">---.-- A</span></div>
                                        <div style="display: flex; gap: 8px; margin-bottom: 12px;">
                                            <input type="number" id="current-limit-setpoint" style="flex: 1; padding: 8px; border: 1px solid #ced4da; border-radius: 4px;" 
                                                   min="0" max="50" step="0.01" placeholder="Limit (A)">
                                            <button class="btn btn-primary" id="power-set-current-limit-btn" disabled style="padding: 8px 16px;">Set</button>
                                        </div>
                                        <div style="font-size: 0.8em; color: #6c757d;"><i class="icon-info"></i> Provides overcurrent protection</div>
                                    </div>
                                </div>
                            </div>

                            <!-- Operations Log Panel -->
                            <div class="control-panel log-panel" style="background: white; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); padding: 20px;">
                                <div class="panel-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px solid #e9ecef;">
                                    <h3 style="margin: 0; font-size: 1.1em; font-weight: 600; color: #495057;"><i class="icon-log" style="margin-right: 8px;"></i>Operations Log</h3>
                                    <div class="log-controls" style="display: flex; gap: 6px;">
                                        <button class="btn btn-sm btn-outline" id="power-clear-log-btn" style="font-size: 0.8em; padding: 4px 8px;">
                                            <i class="icon-clear"></i> Clear
                                        </button>
                                        <button class="btn btn-sm btn-outline" id="power-export-log-btn" style="font-size: 0.8em; padding: 4px 8px;">
                                            <i class="icon-export"></i> Export
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="panel-content">
                                    <div id="power-log-viewer" style="height: 120px; overflow-y: auto; padding: 8px; background: #f8f9fa; border: 1px solid #e9ecef; border-radius: 4px; font-family: monospace; font-size: 0.8em;">
                                        <div style="color: #28a745;">[--:--:--] <span style="color: #007bff;">INFO</span> Power Control Panel initialized</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Load Power Control JavaScript from external file -->
                        <script src="static/js/pages/power-control-embedded.js?v=20250118_1"></script>
                    </div>
                    
                    <!-- MCU Control Page - EMBEDDED FOR CACHE FIX -->
                    <div id="mcu-control" class="content-page hardware-control-panel" style="display: none;">
                        <div class="page-header">
                            <div class="header-content">
                                <h1 class="page-title">
                                    <i class="icon-mcu"></i>
                                    MCU Control System
                                </h1>
                                <div class="page-subtitle">
                                    LMA Temperature Controller - Direct Embedded
                                </div>
                            </div>
                            
                            <!-- Status Badge -->
                            <div class="status-badge" id="mcu-status-badge">
                                <div class="status-indicator">
                                    <div class="status-light status-unknown"></div>
                                    <span class="status-text">Disconnected</span>
                                </div>
                            </div>
                        </div>

                        <div class="panel-grid">
                            <!-- Connection Panel -->
                            <div class="control-panel connection-panel">
                                <div class="panel-header">
                                    <h3><i class="icon-connection"></i> Serial Connection</h3>
                                    <div class="connection-status" id="mcu-connection-status">
                                        <div class="status-dot status-unknown"></div>
                                        <span>Disconnected</span>
                                    </div>
                                </div>
                                
                                <div class="panel-content">
                                    <div class="connection-info" id="mcu-connection-info">
                                        <div class="info-row">
                                            <label>Controller Type:</label>
                                            <span>LMA Temperature Controller</span>
                                        </div>
                                        <div class="info-row">
                                            <label>Port:</label>
                                            <span id="mcu-port">COM4</span>
                                        </div>
                                        <div class="info-row">
                                            <label>Baudrate:</label>
                                            <span id="mcu-baudrate">115200</span>
                                        </div>
                                        <div class="info-row">
                                            <label>Timeout:</label>
                                            <span id="mcu-timeout">2.0s</span>
                                        </div>
                                    </div>
                                    
                                    <div class="connection-controls">
                                        <button class="btn btn-success" id="mcu-connect-btn">
                                            <i class="icon-connect"></i>
                                            Connect
                                        </button>
                                        <button class="btn btn-secondary" id="mcu-disconnect-btn" disabled>
                                            <i class="icon-disconnect"></i>
                                            Disconnect
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- Temperature Monitoring Panel -->
                            <div class="control-panel temperature-panel">
                                <div class="panel-header">
                                    <h3><i class="icon-temperature"></i> Temperature Monitoring</h3>
                                    <button class="btn btn-sm btn-outline" id="mcu-refresh-temperature-btn">
                                        <i class="icon-refresh"></i>
                                        Read
                                    </button>
                                </div>
                                
                                <div class="panel-content">
                                    <div class="temperature-display">
                                        <div class="temperature-reading">
                                            <div class="reading-label">Current Temperature</div>
                                            <div class="reading-value" id="mcu-current-temperature">
                                                <span class="value">---.--</span>
                                                <span class="unit">¬∞C</span>
                                            </div>
                                            <div class="reading-status" id="mcu-temperature-status">
                                                <div class="status-dot status-unknown"></div>
                                                <span>Unknown</span>
                                            </div>
                                        </div>
                                        
                                        <div class="temperature-chart" id="mcu-temperature-chart">
                                            <!-- Temperature chart will be rendered here -->
                                        </div>
                                    </div>
                                    
                                    <div class="temperature-controls">
                                        <button class="btn btn-primary" id="mcu-get-temperature-btn" disabled>
                                            <i class="icon-thermometer"></i>
                                            Read Temperature
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- Test Mode Control Panel -->
                            <div class="control-panel test-mode-panel">
                                <div class="panel-header">
                                    <h3><i class="icon-test"></i> Test Mode Control</h3>
                                    <div class="test-mode-status" id="mcu-test-mode-status">
                                        <div class="status-dot status-unknown"></div>
                                        <span>Normal Mode</span>
                                    </div>
                                </div>
                                
                                <div class="panel-content">
                                    <div class="test-mode-info">
                                        <div class="info-card">
                                            <div class="info-title">Current Mode</div>
                                            <div class="info-value" id="mcu-current-mode">Normal Mode</div>
                                        </div>
                                    </div>
                                    
                                    <div class="test-mode-controls">
                                        <button class="btn btn-warning btn-lg" id="mcu-enter-test-mode-btn" disabled>
                                            <i class="icon-test"></i>
                                            Enter Test Mode
                                            <span class="btn-subtitle">Mode 1 - Testing</span>
                                        </button>
                                        
                                        <button class="btn btn-secondary" id="mcu-exit-test-mode-btn" disabled>
                                            <i class="icon-normal"></i>
                                            Exit Test Mode
                                            <span class="btn-subtitle">Return to normal operation</span>
                                        </button>
                                    </div>
                                    
                                    <div class="test-mode-description">
                                        <i class="icon-info"></i>
                                        <span>Test mode enables special diagnostic and calibration functions</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Temperature Control Panel -->
                            <div class="control-panel temperature-control-panel">
                                <div class="panel-header">
                                    <h3><i class="icon-control"></i> Temperature Control</h3>
                                    <div class="current-setpoint" id="mcu-temperature-setpoint">
                                        Setpoint: <span>---.-- ¬∞C</span>
                                    </div>
                                </div>
                                
                                <div class="panel-content">
                                    <div class="control-form">
                                        <div class="form-group">
                                            <label for="operating-temperature">Operating Temperature (¬∞C)</label>
                                            <div class="input-group">
                                                <input type="number" id="operating-temperature" class="form-control" 
                                                       min="-50" max="200" step="0.1" placeholder="25.0">
                                                <div class="input-group-append">
                                                    <span class="input-group-text">¬∞C</span>
                                                </div>
                                            </div>
                                            <div class="input-help">Range: -50.0 - 200.0 ¬∞C</div>
                                        </div>
                                        
                                        <div class="temperature-presets">
                                            <div class="presets-label">Quick Presets:</div>
                                            <div class="preset-buttons">
                                                <button class="btn btn-sm btn-outline preset-btn" data-temperature="25">25¬∞C</button>
                                                <button class="btn btn-sm btn-outline preset-btn" data-temperature="40">40¬∞C</button>
                                                <button class="btn btn-sm btn-outline preset-btn" data-temperature="60">60¬∞C</button>
                                                <button class="btn btn-sm btn-outline preset-btn" data-temperature="85">85¬∞C</button>
                                                <button class="btn btn-sm btn-outline preset-btn" data-temperature="125">125¬∞C</button>
                                            </div>
                                        </div>
                                        
                                        <button class="btn btn-primary btn-lg" id="mcu-set-temperature-btn" disabled>
                                            <i class="icon-set"></i>
                                            Set Operating Temperature
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- Standby Operations Panel -->
                            <div class="control-panel standby-panel">
                                <div class="panel-header">
                                    <h3><i class="icon-standby"></i> Standby Operations</h3>
                                    <div class="panel-tabs">
                                        <button class="tab-btn active" data-tab="heating">Heating</button>
                                        <button class="tab-btn" data-tab="cooling">Cooling</button>
                                    </div>
                                </div>
                                
                                <div class="panel-content">
                                    <!-- Standby Heating Tab -->
                                    <div class="tab-content active" id="heating-tab">
                                        <div class="standby-form">
                                            <div class="form-row">
                                                <div class="form-group">
                                                    <label for="heating-operating-temp">Operating Temp (¬∞C)</label>
                                                    <input type="number" id="heating-operating-temp" class="form-control" 
                                                           min="30" max="60" step="0.1" value="60" placeholder="60.0">
                                                    <div class="input-help">30-60¬∞C</div>
                                                </div>
                                                <div class="form-group">
                                                    <label for="heating-standby-temp">Standby Temp (¬∞C)</label>
                                                    <input type="number" id="heating-standby-temp" class="form-control" 
                                                           min="30" max="60" step="0.1" value="40" placeholder="40.0">
                                                    <div class="input-help">30-60¬∞C</div>
                                                </div>
                                                <div class="form-group">
                                                    <label for="heating-hold-time">Hold Time (ms)</label>
                                                    <input type="number" id="heating-hold-time" class="form-control" 
                                                           min="1000" max="60000" step="1000" value="10000" placeholder="10000">
                                                    <div class="input-help">1000-60000ms</div>
                                                </div>
                                            </div>
                                            
                                            <div class="heating-preview" id="heating-preview">
                                                <div class="preview-title">Heating Sequence:</div>
                                                <div class="preview-steps">
                                                    <div class="step">1. Heat to <span id="preview-operating">60.0</span>¬∞C</div>
                                                    <div class="step">2. Hold for <span id="preview-hold">10.0</span>s</div>
                                                    <div class="step">3. Cool to <span id="preview-standby">40.0</span>¬∞C</div>
                                                </div>
                                            </div>
                                            
                                            <button class="btn btn-warning btn-lg" id="mcu-start-heating-btn" disabled>
                                                <i class="icon-heat"></i>
                                                Start Standby Heating
                                            </button>
                                        </div>
                                    </div>
                                    
                                    <!-- Standby Cooling Tab -->
                                    <div class="tab-content" id="cooling-tab">
                                        <div class="standby-form">
                                            <div class="cooling-info">
                                                <i class="icon-info"></i>
                                                <span>Standby cooling will start the cooling process to ambient temperature</span>
                                            </div>
                                            
                                            <button class="btn btn-info btn-lg" id="mcu-start-cooling-btn" disabled>
                                                <i class="icon-cool"></i>
                                                Start Standby Cooling
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Boot Control Panel -->
                            <div class="control-panel boot-panel">
                                <div class="panel-header">
                                    <h3><i class="icon-boot"></i> Boot Control</h3>
                                    <div class="boot-status" id="mcu-boot-status">
                                        <div class="status-dot status-unknown"></div>
                                        <span>Unknown</span>
                                    </div>
                                </div>
                                
                                <div class="panel-content">
                                    <div class="boot-info">
                                        <div class="info-row">
                                            <label>Boot Status:</label>
                                            <span id="mcu-boot-complete-status">Unknown</span>
                                        </div>
                                        <div class="info-row">
                                            <label>Last Boot:</label>
                                            <span id="mcu-last-boot-time">--</span>
                                        </div>
                                    </div>
                                    
                                    <div class="boot-controls">
                                        <button class="btn btn-primary" id="mcu-wait-boot-btn" disabled>
                                            <i class="icon-wait"></i>
                                            Wait for Boot Complete
                                            <span class="btn-subtitle">Monitor boot completion signal</span>
                                        </button>
                                    </div>
                                    
                                    <div class="boot-description">
                                        <i class="icon-info"></i>
                                        <span>Wait for MCU to complete its boot sequence and send ready signal</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Operations Log Panel -->
                            <div class="control-panel log-panel">
                                <div class="panel-header">
                                    <h3><i class="icon-log"></i> Operations Log</h3>
                                    <div class="log-controls">
                                        <button class="btn btn-sm btn-outline" id="mcu-clear-log-btn">
                                            <i class="icon-clear"></i>
                                            Clear
                                        </button>
                                        <button class="btn btn-sm btn-outline" id="mcu-export-log-btn">
                                            <i class="icon-export"></i>
                                            Export
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="panel-content">
                                    <div class="log-viewer" id="mcu-log-viewer">
                                        <div class="log-entry">
                                            <span class="timestamp">[--:--:--]</span>
                                            <span class="level info">INFO</span>
                                            <span class="message">MCU Control Panel initialized - EMBEDDED VERSION</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Load MCU Control JavaScript from external file -->
                        <script src="static/js/pages/mcu-control-embedded.js?v=20250118_1"></script>
                    </div>
                    
                    <!-- API Status Page -->
                    <div id="api-status" class="content-page" style="display: none;">
                        <div class="page-header">
                            <div class="header-content">
                                <h1 class="page-title">‚ö° API Status & Information</h1>
                                <div class="page-subtitle">FastAPI Server Status and Endpoints Overview</div>
                            </div>
                        </div>
                        
                        <div class="api-status-container" style="display: grid; gap: 20px; padding: 20px;">
                            <!-- API Server Status -->
                            <div class="status-card" style="background: white; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); padding: 20px;">
                                <h3 style="margin: 0 0 15px 0; color: #333; border-bottom: 1px solid #eee; padding-bottom: 10px;">üñ•Ô∏è Server Status</h3>
                                <div class="server-info" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px;">
                                    <div class="info-item">
                                        <label style="font-weight: bold; color: #666;">Server:</label>
                                        <span id="api-server-status">FastAPI + Uvicorn</span>
                                    </div>
                                    <div class="info-item">
                                        <label style="font-weight: bold; color: #666;">Version:</label>
                                        <span id="api-version">1.0.0</span>
                                    </div>
                                    <div class="info-item">
                                        <label style="font-weight: bold; color: #666;">Port:</label>
                                        <span id="api-port">8004</span>
                                    </div>
                                    <div class="info-item">
                                        <label style="font-weight: bold; color: #666;">Status:</label>
                                        <span id="api-connection-status" style="color: #28a745; font-weight: bold;">üü¢ Online</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- API Documentation Links -->
                            <div class="docs-card" style="background: white; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); padding: 20px;">
                                <h3 style="margin: 0 0 15px 0; color: #333; border-bottom: 1px solid #eee; padding-bottom: 10px;">üìö Documentation</h3>
                                <div class="docs-links" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 15px;">
                                    <div class="doc-item" style="border: 1px solid #ddd; border-radius: 6px; padding: 15px;">
                                        <h4 style="margin: 0 0 8px 0; color: #007bff;">üìñ Swagger UI</h4>
                                        <p style="margin: 0 0 10px 0; font-size: 14px; color: #666;">Interactive API testing and exploration</p>
                                        <a href="/api/docs" target="_blank" class="btn btn-primary" style="display: inline-block; padding: 8px 15px; background: #007bff; color: white; text-decoration: none; border-radius: 4px; font-size: 14px;">Open Swagger UI ‚ÜóÔ∏è</a>
                                    </div>
                                    <div class="doc-item" style="border: 1px solid #ddd; border-radius: 6px; padding: 15px;">
                                        <h4 style="margin: 0 0 8px 0; color: #28a745;">üìã ReDoc</h4>
                                        <p style="margin: 0 0 10px 0; font-size: 14px; color: #666;">Clean, readable API documentation</p>
                                        <a href="/api/redoc" target="_blank" class="btn btn-success" style="display: inline-block; padding: 8px 15px; background: #28a745; color: white; text-decoration: none; border-radius: 4px; font-size: 14px;">Open ReDoc ‚ÜóÔ∏è</a>
                                    </div>
                                    <div class="doc-item" style="border: 1px solid #ddd; border-radius: 6px; padding: 15px;">
                                        <h4 style="margin: 0 0 8px 0; color: #6c757d;">üîß OpenAPI JSON</h4>
                                        <p style="margin: 0 0 10px 0; font-size: 14px; color: #666;">Raw OpenAPI specification</p>
                                        <a href="/api/openapi.json" target="_blank" class="btn btn-secondary" style="display: inline-block; padding: 8px 15px; background: #6c757d; color: white; text-decoration: none; border-radius: 4px; font-size: 14px;">View JSON ‚ÜóÔ∏è</a>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Endpoint Overview -->
                            <div class="endpoints-card" style="background: white; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); padding: 20px;">
                                <h3 style="margin: 0 0 15px 0; color: #333; border-bottom: 1px solid #eee; padding-bottom: 10px;">üîó Hardware API Endpoints</h3>
                                <div class="endpoints-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 15px;">
                                    <!-- General Hardware -->
                                    <div class="endpoint-group">
                                        <h4 style="color: #6c757d; margin: 0 0 10px 0;">‚öôÔ∏è General Hardware</h4>
                                        <ul style="list-style: none; padding: 0; margin: 0;">
                                            <li style="margin-bottom: 5px;"><code>/api/hardware/status</code> - Overall status</li>
                                            <li style="margin-bottom: 5px;"><code>/api/hardware/connect</code> - Connect all</li>
                                            <li style="margin-bottom: 5px;"><code>/api/hardware/initialize</code> - Initialize</li>
                                        </ul>
                                    </div>
                                    
                                    <!-- Robot Control -->
                                    <div class="endpoint-group">
                                        <h4 style="color: #007bff; margin: 0 0 10px 0;">ü§ñ Robot Control</h4>
                                        <ul style="list-style: none; padding: 0; margin: 0;">
                                            <li style="margin-bottom: 5px;"><code>/api/hardware/robot/connect</code> - Connect</li>
                                            <li style="margin-bottom: 5px;"><code>/api/hardware/robot/disconnect</code> - Disconnect</li>
                                            <li style="margin-bottom: 5px;"><code>/api/hardware/robot/servo/enable</code> - Enable servo</li>
                                            <li style="margin-bottom: 5px;"><code>/api/hardware/robot/home-axis</code> - Home axis</li>
                                            <li style="margin-bottom: 5px;"><code>/api/hardware/robot/move-absolute</code> - Absolute move</li>
                                            <li style="margin-bottom: 5px;"><code>/api/hardware/robot/move-relative</code> - Relative move</li>
                                            <li style="margin-bottom: 5px;"><code>/api/hardware/robot/emergency-stop</code> - Emergency stop</li>
                                            <li style="margin-bottom: 5px;"><code>/api/hardware/robot/status</code> - Status</li>
                                        </ul>
                                    </div>
                                    
                                    <!-- Power Supply -->
                                    <div class="endpoint-group">
                                        <h4 style="color: #dc3545; margin: 0 0 10px 0;">üîå Power Supply</h4>
                                        <ul style="list-style: none; padding: 0; margin: 0;">
                                            <li style="margin-bottom: 5px;"><code>/api/hardware/power/status</code> - Status</li>
                                            <li style="margin-bottom: 5px;"><code>/api/hardware/power/control</code> - Enable/Disable</li>
                                            <li style="margin-bottom: 5px;">‚Ä¢ <code>operation: enable</code> - Enable output</li>
                                            <li style="margin-bottom: 5px;">‚Ä¢ <code>operation: disable</code> - Disable output</li>
                                            <li style="margin-bottom: 5px;">‚Ä¢ <code>operation: set_voltage</code> - Set voltage</li>
                                            <li style="margin-bottom: 5px;">‚Ä¢ <code>operation: set_current</code> - Set current</li>
                                        </ul>
                                    </div>
                                    
                                    <!-- MCU Control -->
                                    <div class="endpoint-group">
                                        <h4 style="color: #28a745; margin: 0 0 10px 0;">üñ•Ô∏è MCU Control</h4>
                                        <ul style="list-style: none; padding: 0; margin: 0;">
                                            <li style="margin-bottom: 5px;"><code>/api/hardware/mcu/status</code> - Status</li>
                                            <li style="margin-bottom: 5px;"><code>/api/hardware/mcu/control</code> - Control operations</li>
                                            <li style="margin-bottom: 5px;">‚Ä¢ <code>operation: set_operating_temperature</code> - Set operating temp</li>
                                            <li style="margin-bottom: 5px;">‚Ä¢ <code>operation: set_fan_speed</code> - Set fan speed</li>
                                        </ul>
                                    </div>
                                    
                                    <!-- Load Cell -->
                                    <div class="endpoint-group">
                                        <h4 style="color: #fd7e14; margin: 0 0 10px 0;">‚öñÔ∏è Load Cell</h4>
                                        <ul style="list-style: none; padding: 0; margin: 0;">
                                            <li style="margin-bottom: 5px;"><code>/api/hardware/loadcell/status</code> - Status & reading</li>
                                            <li style="margin-bottom: 5px;"><code>/api/hardware/loadcell/zero</code> - Zero calibration</li>
                                        </ul>
                                    </div>
                                    
                                    <!-- Digital I/O -->
                                    <div class="endpoint-group">
                                        <h4 style="color: #6610f2; margin: 0 0 10px 0;">üî¢ Digital I/O</h4>
                                        <ul style="list-style: none; padding: 0; margin: 0;">
                                            <li style="margin-bottom: 5px;"><code>/api/hardware/digital-io/status</code> - All channels status</li>
                                            <li style="margin-bottom: 5px;"><code>/api/hardware/digital-io/control</code> - I/O operations</li>
                                            <li style="margin-bottom: 5px;">‚Ä¢ <code>operation: read_input</code> - Read single input</li>
                                            <li style="margin-bottom: 5px;">‚Ä¢ <code>operation: write_output</code> - Write output</li>
                                            <li style="margin-bottom: 5px;">‚Ä¢ <code>operation: read_all_inputs</code> - Read all 32 inputs</li>
                                        </ul>
                                    </div>
                                </div>
                                
                                <hr style="margin: 25px 0; border: none; border-top: 1px solid #eee;">
                                
                                <h3 style="margin: 0 0 15px 0; color: #333; border-bottom: 1px solid #eee; padding-bottom: 10px;">üîó Other API Endpoints</h3>
                                <div class="endpoints-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 15px;">
                                    <div class="endpoint-group">
                                        <h4 style="color: #17a2b8; margin: 0 0 10px 0;">‚öôÔ∏è Configuration</h4>
                                        <ul style="list-style: none; padding: 0; margin: 0;">
                                            <li style="margin-bottom: 5px;"><code>/api/config/profiles</code> - Test profiles</li>
                                            <li style="margin-bottom: 5px;"><code>/api/config/hardware</code> - Hardware config</li>
                                            <li style="margin-bottom: 5px;"><code>/api/config/active</code> - Active profile</li>
                                        </ul>
                                    </div>
                                    <div class="endpoint-group">
                                        <h4 style="color: #e83e8c; margin: 0 0 10px 0;">üß™ Test Execution</h4>
                                        <ul style="list-style: none; padding: 0; margin: 0;">
                                            <li style="margin-bottom: 5px;"><code>/api/test/eol-force</code> - EOL force test</li>
                                            <li style="margin-bottom: 5px;"><code>/api/test/status</code> - Test status</li>
                                            <li style="margin-bottom: 5px;"><code>/api/test/results</code> - Test results</li>
                                        </ul>
                                    </div>
                                    <div class="endpoint-group">
                                        <h4 style="color: #20c997; margin: 0 0 10px 0;">üì° WebSocket</h4>
                                        <ul style="list-style: none; padding: 0; margin: 0;">
                                            <li style="margin-bottom: 5px;"><code>/ws</code> - Real-time updates</li>
                                            <li style="margin-bottom: 5px;"><code>/ws/test</code> - Test progress</li>
                                            <li style="margin-bottom: 5px;"><code>/ws/hardware</code> - Hardware events</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Quick Test -->
                            <div class="test-card" style="background: white; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); padding: 20px;">
                                <h3 style="margin: 0 0 15px 0; color: #333; border-bottom: 1px solid #eee; padding-bottom: 10px;">üß™ Quick API Test</h3>
                                <div class="test-controls" style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                                    <button id="test-api-health" class="btn btn-primary" style="padding: 8px 15px; background: #007bff; color: white; border: none; border-radius: 4px;">Test API Health</button>
                                    <button id="test-hardware-status" class="btn btn-success" style="padding: 8px 15px; background: #28a745; color: white; border: none; border-radius: 4px;">Test Hardware Status</button>
                                    <span id="test-result" style="font-weight: bold;"></span>
                                </div>
                                <div id="test-output" style="background: #f8f9fa; padding: 15px; border-radius: 4px; font-family: monospace; font-size: 12px; min-height: 60px; overflow-x: auto; border: 1px solid #e9ecef;"></div>
                            </div>
                        </div>
                        
                        <script src="static/js/pages/api-test-page.js?v=20250118_2"></script>
                    </div>
                    
                    <!-- All other pages will be loaded dynamically from templates -->
                </div>
                
            </main>
            
        </div>
        
        <!-- Bottom Status Bar -->
        <footer id="app-footer" class="app-footer">
            <div class="footer-content">
                <div class="footer-left">
                    <div class="status-section">
                        <span class="footer-label">Status:</span>
                        <span class="footer-value" id="footer-status">Ready</span>
                    </div>
                    <div class="status-section">
                        <span class="footer-label">Active Test:</span>
                        <span class="footer-value" id="active-test">None</span>
                    </div>
                </div>
                <div class="footer-center">
                    <div class="footer-time" id="footer-time">--:--:--</div>
                </div>
                <div class="footer-right">
                    <div class="status-section">
                        <span class="footer-label">Memory:</span>
                        <span class="footer-value" id="memory-usage">--</span>
                    </div>
                    <div class="status-section">
                        <span class="footer-label">CPU:</span>
                        <span class="footer-value" id="cpu-usage">--</span>
                    </div>
                </div>
            </div>
        </footer>
        
    </div>
    
    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay" style="display: none;">
        <div class="loading-spinner">
            <div class="spinner"></div>
            <div class="loading-text">Loading...</div>
        </div>
    </div>
    
    <!-- Modal Container -->
    <div id="modal-container" class="modal-container" style="display: none;">
        <!-- Modal content will be dynamically inserted here -->
    </div>
    
    <!-- Core JavaScript Modules (order matters) -->
    <!-- 1. Common utilities first -->
    <script src="static/js/utils/common.js?v=20250118_2"></script>
    <script src="static/js/utils/api-client-common.js?v=20250118_2"></script>
    
    <!-- 2. Legacy API clients -->
    <script src="static/js/api-client.js"></script>
    <script src="static/js/integration.js"></script>
    
    <!-- 3. Cache management (early to prevent issues) -->
    <script src="static/js/utils/cache-management.js?v=20250118_2"></script>
    
    <!-- 4. Navigation and UI controls -->
    <script src="static/js/utils/debug-navigation.js?v=20250118_2"></script>
    
    <!-- 5. Page-specific modules -->
    <script src="static/js/pages/robot-control-embedded.js?v=20250118_2"></script>
    
    <!-- 6. Main application module (last) -->
    <script type="module" src="static/js/main.js?v=20250110_235255_NOCACHE&t=20250110235500"></script>
    
</body>
</html>