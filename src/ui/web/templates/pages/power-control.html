<!--
Power Hardware Control Panel Template - WF EOL Tester Web Interface

This template provides comprehensive power supply control functionality including:
- Connection management with host/port settings
- Output control (Enable/Disable) with safety warnings
- Voltage/Current setting with real-time feedback
- Current limit configuration
- Live readings display (voltage, current, power)
- Safety confirmation dialogs for high voltage operations
- Status monitoring with connection health
-->

<div id="power-control-page" class="content-page hardware-control-panel" style="display: none;">
    <div class="page-header">
        <div class="header-content">
            <h1 class="page-title">
                <i class="icon-power"></i>
                Power Control System
            </h1>
            <div class="page-subtitle">
                ODA Power Supply Controller
            </div>
        </div>
        
        <!-- Status Badge -->
        <div class="status-badge" id="power-status-badge">
            <div class="status-indicator">
                <div class="status-light status-unknown"></div>
                <span class="status-text">Disconnected</span>
            </div>
        </div>
    </div>

    <div class="panel-grid">
        <!-- Connection Panel -->
        <div class="control-panel connection-panel">
            <div class="panel-header">
                <h3><i class="icon-connection"></i> Connection</h3>
                <div class="connection-status" id="power-connection-status">
                    <div class="status-dot status-unknown"></div>
                    <span>Disconnected</span>
                </div>
            </div>
            
            <div class="panel-content">
                <div class="connection-info" id="power-connection-info">
                    <div class="info-row">
                        <label>Device Type:</label>
                        <span>ODA Power Supply</span>
                    </div>
                    <div class="info-row">
                        <label>Host:</label>
                        <span id="power-host">192.168.11.1</span>
                    </div>
                    <div class="info-row">
                        <label>Port:</label>
                        <span id="power-port">5000</span>
                    </div>
                    <div class="info-row">
                        <label>Channel:</label>
                        <span id="power-channel">1</span>
                    </div>
                    <div class="info-row">
                        <label>Device Identity:</label>
                        <span id="power-device-identity">--</span>
                    </div>
                </div>
                
                <div class="connection-controls">
                    <button class="btn btn-success" id="power-connect-btn">
                        <i class="icon-connect"></i>
                        Connect
                    </button>
                    <button class="btn btn-secondary" id="power-disconnect-btn" disabled>
                        <i class="icon-disconnect"></i>
                        Disconnect
                    </button>
                </div>
            </div>
        </div>

        <!-- Live Readings Panel -->
        <div class="control-panel readings-panel">
            <div class="panel-header">
                <h3><i class="icon-meter"></i> Live Readings</h3>
                <button class="btn btn-sm btn-outline" id="power-refresh-readings-btn">
                    <i class="icon-refresh"></i>
                    Refresh
                </button>
            </div>
            
            <div class="panel-content">
                <div class="readings-grid">
                    <div class="reading-card voltage-card">
                        <div class="reading-label">
                            <i class="icon-voltage"></i>
                            Voltage
                        </div>
                        <div class="reading-value" id="power-voltage-reading">
                            <span class="value">---.--</span>
                            <span class="unit">V</span>
                        </div>
                        <div class="reading-status" id="power-voltage-status">
                            <div class="status-dot status-unknown"></div>
                            <span>Unknown</span>
                        </div>
                    </div>
                    
                    <div class="reading-card current-card">
                        <div class="reading-label">
                            <i class="icon-current"></i>
                            Current
                        </div>
                        <div class="reading-value" id="power-current-reading">
                            <span class="value">---.--</span>
                            <span class="unit">A</span>
                        </div>
                        <div class="reading-status" id="power-current-status">
                            <div class="status-dot status-unknown"></div>
                            <span>Unknown</span>
                        </div>
                    </div>
                    
                    <div class="reading-card power-card">
                        <div class="reading-label">
                            <i class="icon-power"></i>
                            Power
                        </div>
                        <div class="reading-value" id="power-power-reading">
                            <span class="value">---.--</span>
                            <span class="unit">W</span>
                        </div>
                        <div class="reading-status" id="power-power-status">
                            <div class="status-dot status-unknown"></div>
                            <span>Calculated</span>
                        </div>
                    </div>
                </div>
                
                <div class="readings-chart" id="power-readings-chart">
                    <!-- Chart will be rendered here -->
                </div>
            </div>
        </div>

        <!-- Output Control Panel -->
        <div class="control-panel output-panel">
            <div class="panel-header">
                <h3><i class="icon-output"></i> Output Control</h3>
                <div class="output-status" id="power-output-status">
                    <div class="status-dot status-unknown"></div>
                    <span>Unknown</span>
                </div>
            </div>
            
            <div class="panel-content">
                <div class="output-controls">
                    <button class="btn btn-danger btn-lg output-btn" id="power-enable-output-btn" disabled>
                        <i class="icon-power-on"></i>
                        Enable Output
                        <span class="btn-subtitle">⚠️ HIGH VOLTAGE WARNING</span>
                    </button>
                    
                    <button class="btn btn-secondary output-btn" id="power-disable-output-btn" disabled>
                        <i class="icon-power-off"></i>
                        Disable Output
                        <span class="btn-subtitle">Safe shutdown</span>
                    </button>
                </div>
                
                <div class="safety-notice high-voltage-warning">
                    <div class="warning-content">
                        <i class="icon-warning"></i>
                        <div class="warning-text">
                            <div class="warning-title">HIGH VOLTAGE DANGER</div>
                            <div class="warning-message">
                                Ensure all safety precautions are in place before enabling output.
                                Verify proper connections and safety equipment.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Voltage Control Panel -->
        <div class="control-panel voltage-control-panel">
            <div class="panel-header">
                <h3><i class="icon-voltage"></i> Voltage Control</h3>
                <div class="current-setting" id="power-voltage-setting">
                    Current: <span>---.-- V</span>
                </div>
            </div>
            
            <div class="panel-content">
                <div class="control-form">
                    <div class="form-group">
                        <label for="voltage-setpoint">Voltage Setpoint (V)</label>
                        <div class="input-group">
                            <input type="number" id="voltage-setpoint" class="form-control" 
                                   min="0" max="50" step="0.01" placeholder="0.00">
                            <div class="input-group-append">
                                <span class="input-group-text">V</span>
                            </div>
                        </div>
                        <div class="input-help">Range: 0.00 - 50.00 V</div>
                    </div>
                    
                    <div class="voltage-presets">
                        <div class="presets-label">Quick Presets:</div>
                        <div class="preset-buttons">
                            <button class="btn btn-sm btn-outline preset-btn" data-voltage="0">0V</button>
                            <button class="btn btn-sm btn-outline preset-btn" data-voltage="3.3">3.3V</button>
                            <button class="btn btn-sm btn-outline preset-btn" data-voltage="5">5V</button>
                            <button class="btn btn-sm btn-outline preset-btn" data-voltage="12">12V</button>
                            <button class="btn btn-sm btn-outline preset-btn" data-voltage="24">24V</button>
                        </div>
                    </div>
                    
                    <button class="btn btn-primary btn-lg" id="power-set-voltage-btn" disabled>
                        <i class="icon-set"></i>
                        Set Voltage
                    </button>
                </div>
            </div>
        </div>

        <!-- Current Control Panel -->
        <div class="control-panel current-control-panel">
            <div class="panel-header">
                <h3><i class="icon-current"></i> Current Control</h3>
                <div class="panel-tabs">
                    <button class="tab-btn active" data-tab="current">Current</button>
                    <button class="tab-btn" data-tab="limit">Limit</button>
                </div>
            </div>
            
            <div class="panel-content">
                <!-- Current Setting Tab -->
                <div class="tab-content active" id="current-tab">
                    <div class="current-setting-display" id="power-current-setting">
                        Current Setting: <span>---.-- A</span>
                    </div>
                    
                    <div class="control-form">
                        <div class="form-group">
                            <label for="current-setpoint">Current Setpoint (A)</label>
                            <div class="input-group">
                                <input type="number" id="current-setpoint" class="form-control" 
                                       min="0" max="50" step="0.01" placeholder="0.00">
                                <div class="input-group-append">
                                    <span class="input-group-text">A</span>
                                </div>
                            </div>
                            <div class="input-help">Range: 0.00 - 50.00 A</div>
                        </div>
                        
                        <button class="btn btn-primary btn-lg" id="power-set-current-btn" disabled>
                            <i class="icon-set"></i>
                            Set Current
                        </button>
                    </div>
                </div>
                
                <!-- Current Limit Tab -->
                <div class="tab-content" id="limit-tab">
                    <div class="current-limit-display" id="power-current-limit-setting">
                        Current Limit: <span>---.-- A</span>
                    </div>
                    
                    <div class="control-form">
                        <div class="form-group">
                            <label for="current-limit-setpoint">Current Limit (A)</label>
                            <div class="input-group">
                                <input type="number" id="current-limit-setpoint" class="form-control" 
                                       min="0" max="50" step="0.01" placeholder="0.00">
                                <div class="input-group-append">
                                    <span class="input-group-text">A</span>
                                </div>
                            </div>
                            <div class="input-help">Range: 0.00 - 50.00 A</div>
                        </div>
                        
                        <div class="limit-info">
                            <i class="icon-info"></i>
                            <span>Current limit provides overcurrent protection</span>
                        </div>
                        
                        <button class="btn btn-primary btn-lg" id="power-set-current-limit-btn" disabled>
                            <i class="icon-set"></i>
                            Set Current Limit
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Operations Log Panel -->
        <div class="control-panel log-panel">
            <div class="panel-header">
                <h3><i class="icon-log"></i> Operations Log</h3>
                <div class="log-controls">
                    <button class="btn btn-sm btn-outline" id="power-clear-log-btn">
                        <i class="icon-clear"></i>
                        Clear
                    </button>
                    <button class="btn btn-sm btn-outline" id="power-export-log-btn">
                        <i class="icon-export"></i>
                        Export
                    </button>
                </div>
            </div>
            
            <div class="panel-content">
                <div class="log-viewer" id="power-log-viewer">
                    <div class="log-entry">
                        <span class="timestamp">[--:--:--]</span>
                        <span class="level info">INFO</span>
                        <span class="message">Power Control Panel initialized</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>