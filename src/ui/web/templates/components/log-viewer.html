<!--
Log Viewer Component Template - WF EOL Tester Web Interface

This template provides the HTML structure for the comprehensive log viewer component.
It's designed to be embedded within other pages or used as a standalone widget.
The component includes:
- Control buttons for connection, pause/resume, clear, and export
- Filter controls for level, source, search, and time range
- Statistics display with real-time counters
- Virtual scrolling viewport for performance
- Connection status indicators
- Fullscreen mode support

This template is meant to be used by the LogViewerComponent class and should be
included via server-side templating or JavaScript innerHTML.
-->

<div class="log-viewer-container" id="log-viewer-container">
    <!-- Loading Overlay -->
    <div class="log-viewer__loading" id="log-viewer-loading" style="display: none;">
        <div class="log-viewer__loading-spinner"></div>
        <div class="log-viewer__loading-text">Initializing log viewer...</div>
    </div>
    
    <!-- Mini Log Viewer (for sidebar/footer widget) -->
    <div class="log-viewer--mini" id="mini-log-viewer" style="display: none;">
        <div class="log-viewer__mini-header">
            <h3 class="log-viewer__mini-title">Recent Logs</h3>
            <div class="log-viewer__mini-controls">
                <button class="log-viewer__mini-btn" id="mini-log-pause-btn" title="Pause/Resume">
                    <span class="log-viewer__icon">‚è∏Ô∏è</span>
                </button>
                <button class="log-viewer__mini-btn" id="mini-log-expand-btn" title="Expand to Full View">
                    <span class="log-viewer__icon">üîç</span>
                </button>
            </div>
        </div>
        
        <div class="log-viewer__mini-content" id="mini-log-content">
            <!-- Mini log messages will be inserted here -->
        </div>
        
        <div class="log-viewer__mini-footer">
            <div class="log-viewer__mini-stats">
                <span class="log-viewer__mini-stat">
                    <span class="log-viewer__mini-stat-value" id="mini-log-count">0</span>
                    <span class="log-viewer__mini-stat-label">messages</span>
                </span>
                <span class="log-viewer__mini-connection" id="mini-log-connection">
                    <span class="log-viewer__connection-dot"></span>
                </span>
            </div>
        </div>
    </div>
    
    <!-- Main Log Viewer -->
    <div class="log-viewer" id="main-log-viewer">
        <!-- This will be populated by the LogViewerComponent JavaScript -->
    </div>
    
    <!-- Custom Time Range Modal -->
    <div class="log-viewer__modal" id="custom-time-range-modal" style="display: none;">
        <div class="log-viewer__modal-overlay"></div>
        <div class="log-viewer__modal-content">
            <div class="log-viewer__modal-header">
                <h3 class="log-viewer__modal-title">Custom Time Range</h3>
                <button class="log-viewer__modal-close" id="custom-time-close-btn">&times;</button>
            </div>
            
            <div class="log-viewer__modal-body">
                <form id="custom-time-form">
                    <div class="log-viewer__form-group">
                        <label class="log-viewer__form-label" for="custom-start-date">Start Date:</label>
                        <input type="datetime-local" 
                               class="log-viewer__form-input" 
                               id="custom-start-date" 
                               name="startDate"
                               required>
                    </div>
                    
                    <div class="log-viewer__form-group">
                        <label class="log-viewer__form-label" for="custom-end-date">End Date:</label>
                        <input type="datetime-local" 
                               class="log-viewer__form-input" 
                               id="custom-end-date" 
                               name="endDate"
                               required>
                    </div>
                    
                    <div class="log-viewer__form-group">
                        <div class="log-viewer__form-row">
                            <button type="button" 
                                    class="log-viewer__btn log-viewer__btn--secondary" 
                                    id="custom-time-preset-1h">
                                Last Hour
                            </button>
                            <button type="button" 
                                    class="log-viewer__btn log-viewer__btn--secondary" 
                                    id="custom-time-preset-24h">
                                Last 24 Hours
                            </button>
                            <button type="button" 
                                    class="log-viewer__btn log-viewer__btn--secondary" 
                                    id="custom-time-preset-7d">
                                Last 7 Days
                            </button>
                        </div>
                    </div>
                </form>
            </div>
            
            <div class="log-viewer__modal-footer">
                <button type="button" 
                        class="log-viewer__btn log-viewer__btn--secondary" 
                        id="custom-time-cancel-btn">
                    Cancel
                </button>
                <button type="button" 
                        class="log-viewer__btn log-viewer__btn--primary" 
                        id="custom-time-apply-btn">
                    Apply Range
                </button>
            </div>
        </div>
    </div>
    
    <!-- Settings Modal -->
    <div class="log-viewer__modal" id="log-settings-modal" style="display: none;">
        <div class="log-viewer__modal-overlay"></div>
        <div class="log-viewer__modal-content log-viewer__modal-content--large">
            <div class="log-viewer__modal-header">
                <h3 class="log-viewer__modal-title">Log Viewer Settings</h3>
                <button class="log-viewer__modal-close" id="settings-close-btn">&times;</button>
            </div>
            
            <div class="log-viewer__modal-body">
                <form id="log-settings-form">
                    <div class="log-viewer__settings-section">
                        <h4 class="log-viewer__settings-section-title">Display Settings</h4>
                        
                        <div class="log-viewer__form-group">
                            <label class="log-viewer__form-label" for="timestamp-format">Timestamp Format:</label>
                            <select class="log-viewer__form-select" id="timestamp-format" name="timestampFormat">
                                <option value="TIME_ONLY">Time Only (HH:mm:ss)</option>
                                <option value="TIME_WITH_MS">Time with Milliseconds (HH:mm:ss.SSS)</option>
                                <option value="DATE_TIME">Date & Time (YYYY-MM-DD HH:mm:ss)</option>
                                <option value="DATE_TIME_MS">Date & Time with MS</option>
                                <option value="ISO">ISO 8601</option>
                                <option value="RELATIVE">Relative (e.g., 2 minutes ago)</option>
                                <option value="UNIX">Unix Timestamp</option>
                            </select>
                        </div>
                        
                        <div class="log-viewer__form-group">
                            <label class="log-viewer__form-label" for="color-theme">Color Theme:</label>
                            <select class="log-viewer__form-select" id="color-theme" name="theme">
                                <option value="DARK">Dark Theme</option>
                                <option value="LIGHT">Light Theme</option>
                            </select>
                        </div>
                        
                        <div class="log-viewer__form-group">
                            <div class="log-viewer__checkbox-group">
                                <label class="log-viewer__checkbox-label">
                                    <input type="checkbox" 
                                           class="log-viewer__checkbox" 
                                           id="show-timestamps" 
                                           name="showTimestamps" 
                                           checked>
                                    <span class="log-viewer__checkbox-text">Show Timestamps</span>
                                </label>
                                
                                <label class="log-viewer__checkbox-label">
                                    <input type="checkbox" 
                                           class="log-viewer__checkbox" 
                                           id="show-sources" 
                                           name="showSources" 
                                           checked>
                                    <span class="log-viewer__checkbox-text">Show Sources</span>
                                </label>
                                
                                <label class="log-viewer__checkbox-label">
                                    <input type="checkbox" 
                                           class="log-viewer__checkbox" 
                                           id="show-icons" 
                                           name="showIcons" 
                                           checked>
                                    <span class="log-viewer__checkbox-text">Show Level Icons</span>
                                </label>
                                
                                <label class="log-viewer__checkbox-label">
                                    <input type="checkbox" 
                                           class="log-viewer__checkbox" 
                                           id="syntax-highlighting" 
                                           name="enableSyntaxHighlighting" 
                                           checked>
                                    <span class="log-viewer__checkbox-text">Syntax Highlighting</span>
                                </label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="log-viewer__settings-section">
                        <h4 class="log-viewer__settings-section-title">Performance Settings</h4>
                        
                        <div class="log-viewer__form-group">
                            <label class="log-viewer__form-label" for="max-messages">Maximum Messages:</label>
                            <input type="number" 
                                   class="log-viewer__form-input" 
                                   id="max-messages" 
                                   name="maxMessages" 
                                   min="100" 
                                   max="50000" 
                                   value="10000">
                            <small class="log-viewer__form-help">
                                Higher values may impact performance
                            </small>
                        </div>
                        
                        <div class="log-viewer__form-group">
                            <label class="log-viewer__form-label" for="update-interval">Update Interval (ms):</label>
                            <input type="number" 
                                   class="log-viewer__form-input" 
                                   id="update-interval" 
                                   name="updateInterval" 
                                   min="50" 
                                   max="1000" 
                                   value="100">
                            <small class="log-viewer__form-help">
                                Lower values provide smoother updates but use more CPU
                            </small>
                        </div>
                        
                        <div class="log-viewer__checkbox-group">
                            <label class="log-viewer__checkbox-label">
                                <input type="checkbox" 
                                       class="log-viewer__checkbox" 
                                       id="virtual-scrolling" 
                                       name="enableVirtualScrolling" 
                                       checked>
                                <span class="log-viewer__checkbox-text">Virtual Scrolling</span>
                            </label>
                            
                            <label class="log-viewer__checkbox-label">
                                <input type="checkbox" 
                                       class="log-viewer__checkbox" 
                                       id="auto-scroll" 
                                       name="autoScroll" 
                                       checked>
                                <span class="log-viewer__checkbox-text">Auto-scroll to Bottom</span>
                            </label>
                            
                            <label class="log-viewer__checkbox-label">
                                <input type="checkbox" 
                                       class="log-viewer__checkbox" 
                                       id="save-to-storage" 
                                       name="saveToLocalStorage" 
                                       checked>
                                <span class="log-viewer__checkbox-text">Save Session Data</span>
                            </label>
                        </div>
                    </div>
                    
                    <div class="log-viewer__settings-section">
                        <h4 class="log-viewer__settings-section-title">Export Settings</h4>
                        
                        <div class="log-viewer__form-group">
                            <label class="log-viewer__form-label" for="default-export-format">Default Export Format:</label>
                            <select class="log-viewer__form-select" id="default-export-format" name="defaultExportFormat">
                                <option value="txt">Plain Text (.txt)</option>
                                <option value="json">JSON (.json)</option>
                                <option value="csv">CSV (.csv)</option>
                            </select>
                        </div>
                        
                        <div class="log-viewer__checkbox-group">
                            <label class="log-viewer__checkbox-label">
                                <input type="checkbox" 
                                       class="log-viewer__checkbox" 
                                       id="include-metadata" 
                                       name="includeMetadata" 
                                       checked>
                                <span class="log-viewer__checkbox-text">Include Metadata in Exports</span>
                            </label>
                            
                            <label class="log-viewer__checkbox-label">
                                <input type="checkbox" 
                                       class="log-viewer__checkbox" 
                                       id="include-full-content" 
                                       name="includeFullContent">
                                <span class="log-viewer__checkbox-text">Include Full Message Content</span>
                            </label>
                        </div>
                    </div>
                </form>
            </div>
            
            <div class="log-viewer__modal-footer">
                <button type="button" 
                        class="log-viewer__btn log-viewer__btn--secondary" 
                        id="settings-reset-btn">
                    Reset to Defaults
                </button>
                <button type="button" 
                        class="log-viewer__btn log-viewer__btn--secondary" 
                        id="settings-cancel-btn">
                    Cancel
                </button>
                <button type="button" 
                        class="log-viewer__btn log-viewer__btn--primary" 
                        id="settings-save-btn">
                    Save Settings
                </button>
            </div>
        </div>
    </div>
    
    <!-- Message Details Modal -->
    <div class="log-viewer__modal" id="message-details-modal" style="display: none;">
        <div class="log-viewer__modal-overlay"></div>
        <div class="log-viewer__modal-content log-viewer__modal-content--large">
            <div class="log-viewer__modal-header">
                <h3 class="log-viewer__modal-title">Message Details</h3>
                <button class="log-viewer__modal-close" id="message-details-close-btn">&times;</button>
            </div>
            
            <div class="log-viewer__modal-body">
                <div class="log-viewer__message-detail-container" id="message-detail-content">
                    <!-- Message details will be populated here -->
                </div>
            </div>
            
            <div class="log-viewer__modal-footer">
                <button type="button" 
                        class="log-viewer__btn log-viewer__btn--secondary" 
                        id="message-copy-btn">
                    Copy to Clipboard
                </button>
                <button type="button" 
                        class="log-viewer__btn log-viewer__btn--secondary" 
                        id="message-details-close-footer-btn">
                    Close
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Keyboard Shortcuts Help -->
<div class="log-viewer__help-overlay" id="keyboard-shortcuts-help" style="display: none;">
    <div class="log-viewer__help-content">
        <h3 class="log-viewer__help-title">Keyboard Shortcuts</h3>
        
        <div class="log-viewer__help-section">
            <h4>Navigation</h4>
            <div class="log-viewer__shortcut">
                <kbd>Home</kbd> <span>Scroll to top</span>
            </div>
            <div class="log-viewer__shortcut">
                <kbd>End</kbd> <span>Scroll to bottom</span>
            </div>
            <div class="log-viewer__shortcut">
                <kbd>Esc</kbd> <span>Exit fullscreen</span>
            </div>
        </div>
        
        <div class="log-viewer__help-section">
            <h4>Controls</h4>
            <div class="log-viewer__shortcut">
                <kbd>Ctrl</kbd> + <kbd>F</kbd> <span>Focus search</span>
            </div>
            <div class="log-viewer__shortcut">
                <kbd>Ctrl</kbd> + <kbd>L</kbd> <span>Clear logs</span>
            </div>
            <div class="log-viewer__shortcut">
                <kbd>Ctrl</kbd> + <kbd>Space</kbd> <span>Pause/Resume</span>
            </div>
        </div>
        
        <div class="log-viewer__help-footer">
            <button class="log-viewer__btn log-viewer__btn--secondary" onclick="document.getElementById('keyboard-shortcuts-help').style.display='none'">
                Close
            </button>
        </div>
    </div>
</div>

<script>
// Initialize keyboard shortcuts help
document.addEventListener('keydown', function(event) {
    if (event.key === 'F1' || (event.key === '?' && event.shiftKey)) {
        event.preventDefault();
        const helpOverlay = document.getElementById('keyboard-shortcuts-help');
        if (helpOverlay) {
            helpOverlay.style.display = helpOverlay.style.display === 'none' ? 'flex' : 'none';
        }
    }
});

// Close modals when clicking on overlay
document.addEventListener('click', function(event) {
    if (event.target.classList.contains('log-viewer__modal-overlay')) {
        event.target.parentElement.style.display = 'none';
    }
});
</script>